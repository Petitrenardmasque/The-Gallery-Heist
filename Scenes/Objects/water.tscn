[gd_scene load_steps=3 format=3 uid="uid://l6n7rub280fk"]

[sub_resource type="GDScript" id="GDScript_7tov4"]
script/source = "@tool
extends Area2D

@export var _width_tiles : int :
	set(value):
		_width_tiles = max(1, value)
		_update_area()
@export var _height_tiles : int :
	set(value):
		_height_tiles = max(1, value)
		_update_area()

@onready var _collider : CollisionShape2D = $CollisionShape2D

# TODO: visuals

func _update_area():
	if is_inside_tree() == false:
		await ready
	
	_collider.shape.size = Vector2(
		_width_tiles * Level.tile_size,
		_height_tiles * Level.tile_size
	)
	_collider.position = _collider.shape.size / 2.0

func _on_body_entered(body : Node2D):
	if body is Player:
		
		body.water_area(true)

func _on_body_exited(body : Node2D):
	if body is Player:
		body.water_area(false)
"

[sub_resource type="RectangleShape2D" id="RectangleShape2D_tlbx7"]
resource_local_to_scene = true
size = Vector2(16, 16)

[node name="Water" type="Area2D"]
monitorable = false
script = SubResource("GDScript_7tov4")
_width_tiles = 1
_height_tiles = 1

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
position = Vector2(8, 8)
shape = SubResource("RectangleShape2D_tlbx7")

[connection signal="body_entered" from="." to="." method="_on_body_entered"]
[connection signal="body_exited" from="." to="." method="_on_body_exited"]
